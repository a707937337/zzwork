<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
	
	<sqlMap namespace="attendanceCount">
	  <typeAlias alias="attendanceCount" type="com.zz91.zzwork.desktop.domain.hr.AttendanceCount"/>
	   <resultMap class="attendanceCount" id="attendanceCountResult">
	    <result property="id" column="id"/>
	    <result property="name" column="name"/>
	    <result property="code" column="code"/>
	    <result property="punch0" column="punch0"/>
	    <result property="punch20" column="punch0"/>
	    <result property="punch60" column="punch0"/>
	    <result property="punch80" column="punch0"/>
	    <result property="punch_count" column="punchCount"/>
	    <result property="gmt_work" column="gmtWork"/>
	    <result property="gmt_created" column="gmtCreated"/>
	    <result property="gmt_modeified" column="gmtModeified"/>
	   </resultMap>
	   
	  <select id="selectAttendanceCount" parameterClass="java.util.Map" resultClass="attendanceCountResult">
	    
	  </select>
	  
	  <select id="countByNameAndDate" parameterClass="java.util.Map" resultClass="attendanceCountResult">
	    select *  from attendanceCount where name = #name# and gmt_work = #gmtwork#
	  </select>
	  
	  <insert id="addAttendanceCount" parameterClass="attendanceCount">
	   insert into attendancecount
	   (
	   name,
	   code,
	   punch0,
	   punch20,
	   punch60,
	   punch80,
	   punch_count,
	   gmt_work,
	   gmt_created,
	   gmt_modeified
	   )
	   values
	   (
	   #name#,
	   #code#,
	   #punch0#,
	   #punch20#,
	   #punch80#,
	   #punch_count#,
	   #gmtwork#,
	    now,
	    now 
	   )
	   <selectKey keyProperty="id" resultClass="java.lang.Integer">
	   select last_insert_id()
	   </selectKey>
	  </insert>
	</sqlMap>